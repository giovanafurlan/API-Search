<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <title>Google Search</title>
</head>

<style>
  * {
    max-width: 100%;
    margin: 0 1vw 0 1vw;
  }

  .d-flex {
    padding: 3vh 0 3vh 0;
  }

  .form-control {
    width: 50%;
  }

  table {
    table-layout: auto;
    max-width: 91.5vw;
  }

  td {
    vertical-align: baseline;
    max-width: 10vw;
    border: none;

  }

  img,
  video {
    max-width: 10vw;
  }

  .btn-close {
    width: 0.2vw;
    margin: 1vh 1vh 0 0;
  }

  p,
  hr {
    margin: 0;
    padding: 0;
    
  }
</style>

<body>
  <div>
    <div class="d-flex">
      <input class="form-control me-2" id="searchTerm" type="search" placeholder="Digite aqui" aria-label="Search">
      <button class="btn btn-outline-success" type="submit" onClick="consulta()">Buscar</button>
    </div>

    <div class="table-responsive">
      <p>Informações</p>
      <hr>
      <table class="table align-middle" id="table1">
      </table>
    </div>

    <div class="table-responsive">
      <p>Vídeos</p>
      <hr>
      <table class="table align-middle" id="table2">
      </table>
    </div>

    <div class="table-responsive">
      <p>Resultados</p>
      <hr>
      <table class="table align-middle" id="table3">
      </table>
    </div>

    <div class="table-responsive">
      <p>Pesquisas Relacionadas</p>
      <hr>
      <table class="table align-middle" id="table4">
      </table>
    </div>

    <div class="table-responsive">
      <p>Imagens</p>
      <hr>
      <table class="table align-middle" id="table5">
      </table>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
  </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <script>
    $('#searchTerm').on('change', function limpar() {

      $("#table1 tr").remove();
      $("#table2 tr").remove();
      $("#table3 tr").remove();
      $("#table4 tr").remove();
      $("#table5 tr").remove();
    })

    function consulta() {
      var sea = document.getElementById("searchTerm");

      graph(sea.value);
      image(sea.value);
      video(sea.value);
      organic(sea.value);
      related(sea.value);
    }

    function graph(consulta) {

      console.log("Início da requisição");

      var url =
        "https://serpapi.com/search.json?q=" + consulta +
        "&api_key=d707dfa608017f8efa6c6b7522c6a392d2b1e87e98cd5294edf9474b4ce302d4&location=State+of+Sao+Paulo%2C+Brazil&google_domain=google.com.br&hl=pt-br";

      var tabela = document.getElementById("table1");

      $.ajax({
        url: url,
        crossDomain: true,
        type: "GET",
        dataType: "json",
        success: function (data) {

          //knowledge_graph

          var linha = tabela.insertRow(0);
          var linhaData = data.knowledge_graph;

          var l = 0;
          var nome = linha.insertCell(l++);
          nome.innerHTML = linhaData.title;

          var tipo = linha.insertCell(l++);
          tipo.innerHTML = linhaData.type;

          var link = linha.insertCell(l++);
          link.innerHTML = linhaData.website;

          var link = linha.insertCell(l++);
          link.innerHTML = linhaData.description;
        }

      });
    }

    function video(consulta) {

      console.log("Início da requisição");

      var url =
        "https://serpapi.com/search.json?q=" + consulta +
        "&api_key=d707dfa608017f8efa6c6b7522c6a392d2b1e87e98cd5294edf9474b4ce302d4&location=State+of+Sao+Paulo%2C+Brazil&google_domain=google.com.br&hl=pt-br";

      var tabela = document.getElementById("table2");

      $.ajax({
        url: url,
        crossDomain: true,
        type: "GET",
        dataType: "json",
        success: function (data) {

          //inline_videos

          for (var i = 0; i < data.inline_videos.length; i++) {

            var linhaData = data.inline_videos[i];

            if (a == 0) {
              var linha = tabela.insertRow(0);
            } else {
              var linha = tabela.insertRow();
            }

            var l = 0;
            var nome = linha.insertCell(l++);
            nome.innerHTML = linhaData.title;

            var video = linha.insertCell(l++);
            video.innerHTML = "<video src=" + linhaData.link + "></video>";
          }
        }
      });
    }

    function organic(consulta) {

      console.log("Início da requisição");

      var url =
        "https://serpapi.com/search.json?q=" + consulta +
        "&api_key=d707dfa608017f8efa6c6b7522c6a392d2b1e87e98cd5294edf9474b4ce302d4&location=State+of+Sao+Paulo%2C+Brazil&google_domain=google.com.br&hl=pt-br";

      var tabela = document.getElementById("table3");

      $.ajax({
        url: url,
        crossDomain: true,
        type: "GET",
        dataType: "json",
        success: function (data) {

          //organic_results

          for (var i = 0; i < data.organic_results.length; i++) {
            var linhaData = data.organic_results[i];

            if (i == 0) {
              var linha = tabela.insertRow(0);
            } else {
              var linha = tabela.insertRow();
            }

            var l = 0;
            var nome = linha.insertCell(l++);
            nome.innerHTML = linhaData.title;

            var link = linha.insertCell(l++);
            link.innerHTML = "<a href=" + linhaData.link + "/>";

            var snippet = linha.insertCell(l++);
            snippet.innerHTML = linhaData.snippet;
          }
        }
      });
    }

    function related(consulta) {

      console.log("Início da requisição");

      var url =
        "https://serpapi.com/search.json?q=" + consulta +
        "&api_key=d707dfa608017f8efa6c6b7522c6a392d2b1e87e98cd5294edf9474b4ce302d4&location=State+of+Sao+Paulo%2C+Brazil&google_domain=google.com.br&hl=pt-br";

      var tabela = document.getElementById("table4");

      $.ajax({
        url: url,
        crossDomain: true,
        type: "GET",
        dataType: "json",
        success: function (data) {

          //related_searches

          for (var i = 0; i < data.related_searches.length; i++) {

            var linhaData = data.related_searches[i];

            if (i == 0) {
              var linha = tabela.insertRow(0);
            } else {
              var linha = tabela.insertRow();
            }

            var l = 0;
            var nome = linha.insertCell(l++);
            nome.innerHTML = linhaData.query;

            var link = linha.insertCell(l++);
            link.innerHTML = linhaData.link;
          }
        }
      });
    }

    function image(consulta) {

      console.log("Início da requisição");

      var url =
        "https://serpapi.com/search.json?engine=google&q=" + consulta +
        "&location=Brazil&google_domain=google.com.br&gl=br&hl=pt&tbm=isch&ijn=0&api_key=6681352881f290db8ec410f05bc6b9567276022001ad7812884fbac446d342d9";

      var tabela = document.getElementById("table5");

      $.ajax({
        url: url,
        crossDomain: true,
        type: "GET",
        dataType: "json",
        success: function (data) {


          for (var i = 0; i < data.images_results.length; i++) {

            var linhaData = data.images_results[i];

            if (i == 0) {
              var linha = tabela.insertRow(0);
            } else {
              var linha = tabela.insertRow();
            }

            //images_results

            k = 0
            var imagem = linha.insertCell(k++);
            imagem.innerHTML = "<img src='" + linhaData.original + "' />";
            // var img= getBase64Image(imagem); linhaData.original;
          }
        }
      });
    }
  </script>

</body>

</html>